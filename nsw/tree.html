<!DOCTYPE html>
<html lang="ja">
<head>
	<meta charset="UTF-8">
	<title>木の生成</title>
</head>
<body>
<canvas id="cvs" width="800" height="700"></canvas>
<script type="text/javascript">
	var ctx = document.getElementById("cvs").getContext("2d");
	window.onload = function () { tree(15, 400, 700, 200, 90); }

	var tree = function(n,x0,y0,length,angle){
		if(n<0){return;}
		ctx.beginPath();
		ctx.lineWidth = n;
		if(n < 9) {
			ctx.strokeStyle="rgb(0,78,45)";
		} else {
			ctx.strokeStyle="rgb(153,76,0)";
		}
	 	ctx.moveTo(x0,y0);
		var x1 = x0 + Math.cos(angle * Math.PI/180) * length;
		var y1 = y0 - Math.sin(angle * Math.PI/180) * length;
	 	ctx.lineTo(x1,y1);
		ctx.stroke();

		tree(--n,x1,y1,length*0.7,angle-(15+(Math.random()*20)));
		tree(--n,x1,y1,length*0.7,angle+(15+(Math.random()*20)));

	}

</script>
</body>
</html>